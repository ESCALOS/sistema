/*------------Vista parte----------------------------------------------*/
create view partes as
SELECT c.item_id as item, c.component as nombre, c.is_part as parte, c.lifespan as tiempo_vida, cp.hours, ci.implement_id, cc.component as perteneciente,cc.id as perteneciente_id FROM components c INNER JOIN component_part cp ON c.id = cp.part INNER JOIN component_implement ci ON cp.component_implement_id = ci.id INNER JOIN components cc ON ci.component_id = cc.id WHERE cp.state = "PENDIENTE";
/*------------Vista componentes------------------------------------------------*/
create view componentes as
SELECT c.item_id, c.component as nombre, c.is_part as parte, c.lifespan as tiempo_vida, ci.hours, ci.implement_id,'' as perteneciente, 0 AS perteneciente_id FROM component_implement ci INNER JOIN components c ON ci.component_id = c.id WHERE state = 'PENDIENTE';
/*---------juntando vistas-------------------------------------*/
CREATE VIEW implement_component_part AS
SELECT * FROM partes UNION ALL SELECT * FROM componentes;
/*-----------Vista de componentes del imPlemento----------*/
CREATE VIEW componentes_del_implemento AS
SELECT c.id as component_id,c.item_id as item_id, c.component as item, i.id as implement_id FROM components c INNER JOIN component_implement_model cim ON c.id = cim.component_id INNER JOIN implements i ON i.implement_model_id = cim.implement_model_id INNER JOIN items it ON it.id = c.item_id;
/*-----------Vista de piezas del componente----------*/
CREATE VIEW partes_del_componente AS
SELECT p.id as part_id, p.item_id as item_id, p.component as item, c.id as componente_id FROM components p INNER JOIN component_part_model cpm on p.id = cpm.part INNER JOIN components c ON c.id = cpm.component;
/*-------------Vista piezas simplificada----------------*/
CREATE VIEW piezas_simplificada AS
SELECT c.item_id,cpm.part as part_id,p.component as part FROM component_part_model cpm INNER JOIN components c ON c.id = cpm.component INNER JOIN components p ON p.id = cpm.part;